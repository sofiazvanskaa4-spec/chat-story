<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Chat Story</title>
<style>
body {
  margin: 0;
  background: #000;
  font-family: Arial, sans-serif;
  color: #fff;
  overflow-x: hidden;
}

/* Фон на весь экран */
#background {
  position: fixed;
  inset: 0;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  z-index: -1;
}

/* Чат */
#chat {
  padding: 15px;
  padding-bottom: 120px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Пузырь сообщений */
.bubble {
  display: flex;
  gap: 8px;
  max-width: 80%;
  align-items: flex-end;
}

.left { align-self: flex-start; }
.right { align-self: flex-end; flex-direction: row-reverse; }

.msg {
  background: #2a2a2a;
  padding: 10px 14px;
  border-radius: 14px;
  font-size: 15px;
  line-height: 1.4;
}

.right .msg { background: #5a2cff; }

.avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
}

/* Медиа в чате */
video, img.media {
  max-width: 220px;
  border-radius: 14px;
}

/* Кнопка "далее" */
#tap {
  position: fixed;
  bottom: 0;
  width: 100%;
  padding: 15px;
  text-align: center;
  background: #111;
  cursor: pointer;
  user-select: none;
}
</style>
</head>
<body>

<div id="background"></div>
<div id="chat"></div>
<div id="tap">Нажми, чтобы продолжить</div>

<script>
/* ===== ПЕРСОНАЖИ ===== */
const characters = {
  ella:{name:"Элла",side:"right",avatar:"img/ella.jpg"},
  eric:{name:"Эрик",side:"left",avatar:"img/eric.jpg"},
  natalie:{name:"Натали",side:"left",avatar:"img/natalie.jpg"},
  yan:{name:"Ян",side:"left",avatar:"img/yan.jpg"},
  kate:{name:"Кейт",side:"left",avatar:"img/kate.jpg"},
  michael:{name:"Майкл",side:"left",avatar:"img/michael.jpg"},
  father:{name:"Папа",side:"left",avatar:"img/father.jpg"},
  stepmother:{name:"Мачеха",side:"left",avatar:"img/stepmother.jpg"},
  brother1:{name:"Брат 1",side:"left",avatar:"img/brother1.jpg"},
  brother2:{name:"Брат 2",side:"left",avatar:"img/brother2.jpg"},
  john:{name:"Джон",side:"left",avatar:"img/john.jpg"},
  lucas:{name:"Лукас",side:"left",avatar:"img/lucas.jpg"},
  guy:{name:"Парень",side:"left",avatar:"img/guy.jpg"},
  unknown:{name:"Неизвестный",side:"left",avatar:"img/unknown.jpg"},
  existence:{name:"Существо",side:"left",avatar:"img/existence.jpg"},
  doctor:{name:"Врач",side:"left",avatar:"img/doctor.jpg"},
  author:{name:"Автор",side:"left",avatar:"img/author.jpg"},
  olivia:{name:"Оливия",side:"left",avatar:"img/olivia.jpg"},
  mother:{name:"Мама",side:"left",avatar:"img/mother.jpg"},
  seller:{name:"Продавец",side:"left",avatar:"img/seller.jpg"},
  guest:{name:"Гость",side:"left",avatar:"img/guest.jpg"},
  teacher:{name:"Учитель",side:"left",avatar:"img/teacher.jpg"},
  chris:{name:"Крис",side:"left",avatar:"img/chris.jpg"}
};

/* ===== ИСТОРИЯ (ПУСТОЙ МАССИВ) ===== */
const story = [
  // Здесь будут добавляться шаги истории
];

/* ===== ЛОГИКА ===== */
let index = 0;
const chat = document.getElementById("chat");
const tap = document.getElementById("tap");
const background = document.getElementById("background");

tap.onclick = nextStep;

function nextStep() {
  if(index >= story.length) return;

  const step = story[index];
  const char = characters[step.char];

  const bubble = document.createElement("div");
  bubble.className = "bubble " + (char ? char.side : "left");

  if(char && char.avatar){
    const avatar = document.createElement("img");
    avatar.src = char.avatar;
    avatar.className = "avatar";
    bubble.appendChild(avatar);
  }

  /* Видео */
  if(step.video){
    const v = document.createElement("video");
    v.src = step.video;
    v.controls = true;
    bubble.appendChild(v);
  }

  /* Картинка */
  if(step.image){
    const img = document.createElement("img");
    img.src = step.image;
    img.className = "media";
    bubble.appendChild(img);

    // меняем фон экрана
    background.style.backgroundImage = `url(${step.image})`;
  }

  /* Текст */
  if(step.text){
    const msg = document.createElement("div");
    msg.className = "msg";
    msg.textContent = (char ? char.name : "Автор") + ": " + step.text;
    bubble.appendChild(msg);
  }

  chat.appendChild(bubble);
  index++;
  window.scrollTo(0, document.body.scrollHeight);
}
</script>
</body>
</html>
